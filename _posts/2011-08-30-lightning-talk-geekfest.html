---
layout: post
title: "Lightning Talk - Geekfest"
date: 2011-08-30
comments: false
---

<div class='post'>
As part of Geekfest, a weekly chicago area meetup I gave a 5-minute lightning talk on some basic command line shortcuts. My outline and the commands are below.<br /><br />#Introduction<br />#I'm Philip Corliss a Software Developer here at Groupon, while pairing and my partner is using the keyboard I'll often throw out requests for them to tab-complete, pipe to grep, or ESC-. They usually look at me like I'm crazy. This talk is designed to quickly outline a common scenario of&nbsp;parsing&nbsp;a log file or some other formatted file.<br /><br />#What's this file<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">ls </span><br /><br />#Whoah, watch this, if you're not familiar with tab completion you should be, it will make your life ridiculously easy. I for one can only spell the first three letters of most words at this point<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">less post.... </span><br /><br />#Lets take a look, binary huh? weird<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">less postal_codes.csv.gz </span><br /><br />#Oh yea it's a gzip file, meaning it's compressed we could decompress it, but for this example lets pretend this compressed file is 1Gb and a 1:10 compression ratio that's 10Gb of data, we don't want to wait for that. So lets just look at it inline. Way faster<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip ... </span><br /><br />#Decompresses directly to STDOUT, great for working with the file<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip -dc postal_codes.csv.gz </span><br /><br />#Whoa, too much data, that doesn't really help us<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">^C </span><br /><br />#What's that, it's a Pipe, it pipes stdout from one program to another<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip -dc postal_codes.csv.gz | </span><br /><br />#First 15 lines then it exits, no extra resources or IO consumed and we get a quick sample of data<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip -dc postal_codes.csv.gz | head -15</span><br /><br />#Lets cut this up alternative syntax in awk for multi-char delimeters awk -F'|' '{ print $3 ":" $4}'<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip -dc postal_codes.csv.gz | head -15 | cut -d'|' -f3,4 </span><br /><br />#Lets sort it, get the unique values and count them and then sort numerically the results<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip -dc postal_codes.csv.gz | head -15 | cut -d'|' -f3,4 | sort | uniq -c | sort -n </span><br /><br />#Top 30 city/province pairs for canadian zipcodes, it takes some time so we'll cache it to a file<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">gzip -dc postal_codes.csv.gz | head -15 | cut -d'|' -f3,4 | sort | uniq -c | sort -n | tail -30 </span><br /><br />#Lets see how long it takes, and lets write it to a file<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">time gzip -dc postal_codes.csv.gz | cut -d'|' -f3,4 | sort | uniq -c | sort -n &gt; ~/my_sweet_report.txt</span><br /><br />#Use ESC-. to bring up last arg<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">less ~/my_sweet_report.txt&nbsp;</span><br /><br /></div>
